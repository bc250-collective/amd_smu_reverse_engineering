SMU_ARG_ADDR = 1
resp = 0

memory_pointer = 0
memory = {
    0xca4c: 1001,
    0x1B930: 0x257B1C02
}

def readsmureg(reg):
    if reg == SMU_ARG_ADDR:
        return resp

def writesmu(cmd, value=0):
    global resp
    global memory_pointer
    global memory
    
    match cmd:
        case 0x01: # Test Message
            resp = value + 1
            return 1
        case 0x03: # Constant 23
            if memory[0x1B930] == 0x257B1C02:
                resp = 23
            elif memory[0x1B930] == 0x258B1C02:
                resp = 24
            else:
                return 0xff
            return 1
        case 0x0B: # Read back value
            resp = memory[0xca4c]
            return 1
        case 0x28: # write to pointer
            memory[memory_pointer] = value
            return 1
        case 0x29: # set pointer address
            memory_pointer = value
            return 1
        case _:
            return 0
